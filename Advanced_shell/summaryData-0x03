#!/bin/bash

# Create CSV header
echo "Name,Height (m),Weight (kg)" > pokemon_report.csv

# Loop over all JSON files
for file in *.json
do
  name=$(jq -r '.name' "$file" | sed 's/.*/\u&/')  # Capitalize with sed
  height=$(jq '.height' "$file" | awk '{printf "%.2f", $1 / 10}')
  weight=$(jq '.weight' "$file" | awk '{printf "%.2f", $1 / 10}')
  echo "$name,$height,$weight" >> pokemon_report.csv
done

# Notify user
echo "CSV Report generated at: pokemon_report.csv"

# Compute averages using awk
awk -F, 'NR>1 {h+=$2; w+=$3; c++} END {printf "\nAverage Height: %.2f m\nAverage Weight: %.2f kg\n", h/c, w/c}' pokemon_report.csv